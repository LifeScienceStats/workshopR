---
title: "Introduction to R - Day 1"
author: Lidiya Mishieva
date: today
date-format: "DD MMMM, YYYY"
format: 
  revealjs:
   # theme: dark
    smaller: true
    scrollable: false
    chalkboard: true
    footer: "Introduction to R - Day 1"
    slide-number: true
    editor: visual
---

## Intro

::: incremental
-   Day 1: basic syntax, classes, objects, functions

-   Day 2: base package, tidy programming & tidyverse

-   Day 3: RMarkdown / Quarto

-   Day 4: Git & RStudio
:::

## RStudio

::: incremental
-   IDE with User interface for R

-   Programming & dynmic reporting

-   R package development
:::

## RStudio user interface

. . .

![RStudio screen shot](images/clipboard-1499669945.png)

## Basic Syntax

## Basic Syntax - assignment

::: incremental
-   Assigning a value to an object

    ```{r}
    #| echo: true

    # assigning a value to an object
    x <- sqrt(4)
    y = sqrt(4)
    ```

-   Using `<-` and `=` gives the same result, but `<-` is better for consistency

    ```{r}
    #| echo: true

    x # print x
    ```

    ```{r}
    #| echo: true

    y # print y
    ```
:::

## Basic Syntax - assignment

::: incremental
-   In R objects get overwritten without warning!

    ```{r}
    #| echo: true

    x <- sqrt(9)
    x
    ```

-   Case-sensitivity

    ```{r}
    #| echo: true

    x <- sqrt(9) # lowercase x
    X <- sqrt(16) # uppercase x
    ```

    ```{r}
    #| echo: true

    x # lowercase x
    X # uppercase x
    ```
:::

## Basic Syntax - assignment

::: incremental
-   Some symbols are predefined and should not be used as object names, for example:

-   T & F

    ```{r}
    #| echo: true

    T # logical operator TRUE
    F # logical operator FALSE

    ```

-   t

    ```{r}
    #| echo: true

    # function for transposing a matrix
    mat <- matrix(c(1,1,1,2,2,2), nrow = 3, ncol = 2)
    mat
    t(mat)
    ```
:::

## Basic Syntax - assignment

::: incremental
-   You can overwrite some them (bad practice)

    ```{r}
    #| echo: true

    T <- 1
    T
    ```

-   Tip: always use TRUE and FALSE instead of T and F

    ```{r}
    #| eval: false
    #| include: false

    TRUE
    TRUE <- 1
    ```
:::

. . .

![](images/clipboard-1233169646.png){width="578"}

<!-- ## Basic Syntax - commonly used operators and functions -->

<!-- ::: incremental -->

<!-- -   TBA -->

<!-- ::: -->

## Objects

::: incremental
-   Objects vs. functions

-   Object-oriented programming

-   Objects are stored in the environment unless explicitly deleted using `rm()`

-   Objects stored in the environment can be saved using `save.image()`\`

-   Always start a new script by cleaning up your workspace `rm(list=ls())`
:::

## Objects - vectors

::: incremental
-   There are two types of vectors:
    -   Atomic vectors
        -   logical vectors
        -   integer & double (numeric) vectors
        -   character vectors
    -   Lists or recursive vectors
:::

## Objects - vectors

![<https://adv-r.hadley.nz/vectors-chap.html>](images/clipboard-2217106657.png)

. . .

![The hierarchy of Râ€™s vector types (<https://r4ds.had.co.nz/vectors.html>)](images/clipboard-333787781.png)

## Objects - lists, matrices, dataframes, arrays

. . .

![](images/clipboard-2200821334.png)

. . .

## Objects - lists, matrices, dataframes, arrays

. . .

-   Defining different vectors:

. . .

```{r}
#| echo: true

x <- c(1, 2, 3, 4)
y <- c("a", "b", "c", "d")
z <- 5
a <- c("Jayan will be",25,"years old in",2028)

```

. . .

-   Output:

. . .

```{r}
#| echo: false
#| eval: true

cat(x,":" ,class(x),"\n")
cat(y,":" ,class(y),"\n")
cat(z,":" ,class(z),"\n")
cat(a,":" ,class(a),"\n")
```

## Objects - lists, matrices, dataframes, arrays

. . .

-   Defining different lists:

. . .

```{r}
#| echo: true

ls1  <- list(c(1, 2, 3, 4))
ls2 <- list("a", "b", "c")
ls3 <- c(ls1,ls2)

```

## Objects - lists, matrices, dataframes, arrays

. . .

-   Output:

. . .

```{r}
#| echo: false
#| eval: true

ls1
ls2
ls3
```

## Objects - lists, matrices, dataframes, arrays

. . .

-   Defining a matrix:

. . .

```{r}
#| echo: true

x <- c(1, 2, 3, 4, 5, 6, 7, 8, 9)

mat <- matrix(x, nrow = 3)

```

. . .

-   Output:

. . .

```{r}
#| echo: false
#| eval: true

print(mat)
```

## Objects - lists, matrices, dataframes, arrays

. . .

-   Defining a data.frame:

. . .

```{r}
#| echo: true

x <- 1:10
y <- LETTERS[1:10]
z <- c("Ansh", "Raj", "Sahil", "Vikram", "Ravi", "Kareena", "Anita", "Jayan", "Priya", "Sunil")

df <- data.frame(x, y, z)

```

. . .

-   Output:

. . .

```{r}
#| echo: false
#| eval: true

print(df)
```

<!-- ## Indices and extraction -->

<!-- ::: incremental -->

<!-- ::: -->

## Functions

## Functions - syntax

. . .

-   Basic syntax of a function

. . .

```{r}
#| echo: true
#| eval: false

my_function <- function(arguments){
  statements
  return(value)
}

```

. . .

::: callout-note
In R you can drop the return statement in most of the cases. Last evaluated object is returned automatically.
:::

. . .

-   Looking for a function within a package:

```{r}
#| echo: true
#| eval: false

# package::function()
dplyr::add_count()

```

## Functions - custom functions

::: incremental
-   In R, you can write your own functions. Here is an example:

    ```{r}
    #| echo: true

    # define a function that produces a sum of two numbers
    my_sum <- function(a, b) {
      result <- a + b
      return(result)
    }

    # call a function
    my_sum(a=1, b=2)
    ```

-   Assigning the returned value to an object:

    ```{r}
    #| echo: true

    x <- my_sum(a=1, b=2)
    x
    ```

-   As long as we remember the order of the arguments, we can just enter the values of the parameters:

    ```{r}
    #| echo: true

    my_sum(1, 2)
    ```
:::

## Functions - custom functions

::: incremental
-   Removing the return() statement - the result is still returned, but not printed if the function is called without assignment:

    ```{r}
    #| echo: true

    my_sum <- function(a, b) {
      result <- a + b
    }

    my_sum(a=1, b=2)
    x <- my_sum(a=1, b=2)
    x
    ```

-   We can embed function within functions, like we have done here with a for-loop within a custom function:

    ```{r}
    #| echo: true

    # define a function that produces a sum from a list of numbers
    my_sum <- function(x) {
      total <- 0
      for (i in x) {
        total <- total + i
      }
      return(total)
    }
      
    # call a function
    my_sum(x=list(1, 2, 3))
    ```
:::

## Functions - custom functions

::: incremental
-   Of course the `sum()` function already exists, but often we code specific analyses that we want to apply a number of times - a custom function can be helpful here

-   **If you have to copy the code at least 3 times - write a function for it!**
:::

## Functions - conditional execution

::: incremental
-   Here is a syntax for a simple if-else function:

    ```{r}
    #| echo: true
    #| eval: false

    if (condition) {
      # code executed when condition is TRUE
    } else {
      # code executed when condition is FALSE
    }
    ```

-   Defining multiple conditions:

    ```{r}
    #| echo: true
    #| eval: false

    if (this) {
      # do that
    } else if (that) {
      # do something else
    } else {
      # 
    }
    ```

-   There is also a function ifelse() that is useful when there are not too many conditions, e.g. creating dummy variables:

    ```{r}
    #| echo: true

    var <- 1:10

    ifelse(var < 5, 0, 1)
    ```
:::

## Functions - conditional execution

::: incremental
-   Still, you can define more conditions here:

    ```{r}
    #| echo: true

    var <- 1:10

    ifelse(var < 5, 0, ifelse( var > 7, 2, 1))

    ```
:::

## Functions - standard loops: a for-loop

::: incremental
-   General syntax:

    ```{r}
    #| echo: true
    #| eval: false

    for (var in vector)
     {
       statement(s)    
     }
    ```

-   Here is another example:

    ```{r}
    #| echo: true

    for (i in 1:4){
        print(i ^ 2)
    }
    ```

-   A break statement:

    ```{r}
    #| echo: true

    for (i in c(1, 2, 3, 0, 9, 7))
    {
        if (i == 0)
        {
            break
        }
       print(i)
    }
    ```
:::

## Functions - standard loops: a for-loop

::: incremental
-   A next statement:

    ```{r}
    #| echo: true

    for (i in c(1, 2, 3, 0, 9, 7))
    {
        if (i == 0)
        {
            next
        }
        print(i)
    }
    ```
:::

## Functions - standard loops: a while-loop

::: incremental
-   An example:

    ```{r}
    #| echo: true

    # a while-loop
    i <- 1
    while (i < 6) {
      print(i)
      i <- i + 1
    } 
    ```

-   Using the break-statement

    ```{r}
    #| echo: true
    #| 
    i <- 1
    while (i < 6) {
      print(i)
      i <- i + 1
      if (i == 4) {
        break
      }
    } 

    ```
:::

## Functions - 'apply' family

::: incremental
-   Functions from the 'apply' family are essentially loops

-   But they allow to run loops in one line (in contrast to for a while loops that require a multi-line syntax)

-   There are multiple apply functions:

    -   `lapply()`

        -   iterates over each element of a list

        -   applies a *function* to each element of the list

        -   returns a list
:::

## Functions - 'apply' family (Example 1)

. . .

-   Define a list

. . .

```{r}
#| echo: true

x <- list(a = 1:5)
x
```

. . .

-   Change each element iteratively

. . .

```{r}
#| echo: true

# add number 1 to each element of the list
lapply(x, function(x){x+1})

```

## Functions - 'apply' family (Example 2)

. . .

-   Define a list containing 2 subvectors

. . .

```{r}
#| echo: true

x <- list(a = 1:5, b = rnorm(10))
x
```

. . .

-   Apply mean computation by looping through a list

. . .

```{r}
#| echo: true

# the result is a list containing vectors
lapply(x, mean)
```

## Functions - 'apply' family

::: incremental
-   There are some more:

    -   `sapply()` essentialy the same as `lapply()`, bit simplifying the output

    -   `apply()`: Apply a function over the margins of an array

    -   `tapply()`: Apply a function over subsets of a vector

    -   `mapply()`: Multivariate version of `lapply`
:::

## Packages

::: incremental
-   R packages are sets of multiple functions

-   Most of them are produced using R - you can write your one function, if you want to combine all your custom functions (you can follow this [quide](https://docs.posit.co/ide/user/ide/guide/pkg-devel/writing-packages.html))

-   CRAN

-   Development versions and packages that are not stored at CRAN

-   Need to be loaded into the environment in every session

-   Documentation

-   Searching for a function in a package

-   Printing the code of a function

-   Not all packages are maintained 'forever'

-   Versions and `sessionInfo()`

-   Project environment using `renv` package
:::

## Getting help

::: incremental
-   You can use `?` or `help()` to call an R Documentation of a function or an operator

    ```{r}
    #| eval: false
    #| echo: true

    ?t
    help(t)
    ```
:::

. . .

![](images/clipboard-983311699.png){width="398"}

## Getting help

::: incremental
-   Some are organized in help topics, check it out

    ```{r}
    #| eval: false
    #| echo: true

    ?Syntax # operator syntax and precedence
    ?Arithmetic # arithmetic operators
    ?Comparison # relational operators
    ?Extract # operators on vectors and arrays
    ?Control # control flow
    ?Logic # logical operators
    ```
:::

## Getting help

::: incremental
-   RSeek (<https://www.rseek.org/>)

-   ![](images/clipboard-2722322964.png)
:::

## Getting help

::: incremental
-   Posit community (<https://forum.posit.co/>)

-   Posit Cheatsheets (<https://rstudio.github.io/cheatsheets/>)

-   Manuals on CRAN (<https://cran.r-project.org/manuals.html>)

-   Documentations on CRAN (<https://cran.r-project.org/web/packages/available_packages_by_name.html>)

-   Stack exchange (<https://stats.stackexchange.com>)

-   Stack overflow (<https://stackoverflow.com>)
:::
