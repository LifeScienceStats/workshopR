---
title: "Introduction to R - Day 4"
author: "Lidiya Mishieva"
date: today
date-format: "DD MMMM, YYYY"
format: 
  revealjs:
   # theme: dark
    smaller: true
    scrollable: false
    chalkboard: true
    footer: "Introduction to R - Day 4"
    slide-number: true
    editor: visual
---

## Intro

-   Day 1: basic syntax, classes, objects, functions

-   Day 2: base package, tidy programming & tidyverse

-   Day 3:

    -   Part 1: Summarizing data / tables

    -   Part 2: Reporting with RMarkdown / Quarto

-   **Day 4: Git & RStudio**

-   *Still missing: further operations on vectors. graphs, referencing in rmd/qmd, citations and bibliography*

## Today ...

-   Git architecture

-   Basic commands

-   Forking & branching

-   Merging

-   Change history

-   Discussion about procedures

-   Hands on & exercises

## Git architecture

. . .

![](images/clipboard-3240295348.png)

## Git architecture

![](images/clipboard-3826345041.png)

## Git architecture

![](images/clipboard-1698744149.png)

## Git architecture

![](images/clipboard-2740195371.png)

## Git architecture

![](images/clipboard-996425495.png)

## Git architecture

![](images/clipboard-3610806933.png)

## Git architecture

![](images/clipboard-2868200204.png)

## Git architecture

![](images/clipboard-28739665.png)

## Git architecture

![](images/clipboard-2081128607.png)

## Git architecture

![](images/clipboard-3834276077.png)

## Git architecture

![](images/clipboard-4143360904.png)

## Git architecture

![](images/clipboard-2778612830.png)

## Git architecture

![](images/clipboard-3805812573.png)

## Git architecture

![](images/clipboard-3256814595.png)

## Git architecture

![](images/clipboard-3295592137.png)

## Forking and branching

::: incremental
-   **Fork:** a **copy of someone else’s repository** in your own GitHub account

    -   allows you to work independently without affecting the original project

-   **Branch:** a **separate line of development** within a repository

    -   allows to work on features or fixes without changing the main branch
:::

## Forking and branching

![](images/clipboard-3091317810.png){fig-align="left" width="634"}

## Merging and merge conflict

::: incremental
-   **Merging:** combines changes from one branch into another
-   typically integrating a feature branch into main
-   but it could also be a fix within a branch
-   **Merge conflict:** Git cannot automatically combine changes because the same part of a file was edited differently in both branches
-   **Resolving conflicts**: manually editing the conflicting files, keeping the desired changes, then staging and committing the resolution
:::

## Merging and merge conflict

![](images/clipboard-21952241.png)

## Change history - log & reflog

::: incremental
-   `git log`:

    -   shows the **history of commits** in your repository
    -   includes commit hashes, author, date, and commit messages
    -   only shows commits that are reachable

-   `git reflog`:

    -   shows the **history of HEAD movements**
    -   includes commits, branch checkouts, resets, merges, rebases, etc.
    -   even includes commits that are “lost” or not visible in `git log` anymore
:::

## Detached HEAD

![https://wolfmcnally.com/162/git-what-is-a-detached-head/](images/clipboard-900321700.png){fig-align="left" width="469"}

## Basic commands

. . .

| Command | Description |
|-----------------------------|-------------------------------------------|
| git clone <repository_URL> | create an initial local copy of a repository |
| git pull `<remote_name`{=html} | pull changes from a remote repository |
| git fetch <remote_name> | fetch changes from a remote repository |
| git add <filename> | stage a specific file |
| git add . | stage all files |
| git commit -m "Initial commit" | commit and add a commit message |
| git push <remote_name> <branch_name> | pushes the changes to the remote repository |
| git status | check the status of the files |
| git log | view commit history |
| git log --graph --oneline | view the history tree (commits are shown in one line only) |

## Basic commands

| Command | Description |
|-----------------------------|-------------------------------------------|
| git reflog | view the log of the head |
| git checkout HEAD\@{2} | go to an older state of the head |
| git reset --hard HEAD\@{2} | reset the head to an older commit |
| git checkout -b <branch_name> HEAD\@{2} | create a branch from a specific state of the head |
| git checkout -b <branch_name> 1b18a33 | create a branch from a specific commit |
| git checkout -b <branch_name> | create and switch to a new branch from where you currently are |
| git checkout <branch_name> | switch to an existing branch |
| git merge <source_branch> | merge changes from another branch (source branch) |

## General recommendations

::: incremental
-   Always pull the current state of the repository before you start working (if others are working on it)

-   Commit early and often, even after small tasks

-   Write clear and meaningful commit messages

-   Do not work directly on the `main` branch, always create a separate branch for development

-   Merge only once your changes are complete and tested

-   Push your changes frequently when working in a team
:::

## Hands on & discussion

## How should we work with Git?

::: incremental
-   There is 1 firm account responsible for creating and maintaining all the project repositories

-   But everyone also has an account of their own

-   Everyone forks the project repositories published by the firm accounts, and then:

    -   works locally on the code, commits & pushes to the [**own**]{.underline} forked remote repositories
    -   sends out [**pull requests**]{style="color:blue;"} to the [**main branch**]{style="color:blue;"} of the [**original**]{style="color:blue;"} repositories

-   The person responsible for maintaining the firm account:

    -   will review the pull requests & incorporate them into the original code (if present)
    -   or just accept that the file is stored in the original repository
    -   [**code releases**]{style="color:blue;"} a produced from the main firm account
:::

## Setting up Git

::: incremental
1.  Installing Git on your computer: <https://git-scm.com/install/>
2.  Create a github account: <https://github.com/> -\> sign up
3.  Go to your github account & create a new repo called `myfirstrepo`
4.  Create a directory on your computer called `myfirstrepo`
5.  Go to RStudio
    -   Create a new Rproject
    -   *File -\> New Project ... -\> Version Control -\> Git*
        -   Add a repository URL
        -   Choose the directory for your Rproject
        -   Accept & RStudio will clone this repo for you!
:::

## Setting up Git (forking)

::: incremental
1.  Go to the URL of the repo you want to clone: [https://github.com/LifeScienceStats/workshopR](https://github.com/LifeScienceStats/workshopRex)
2.  *Fork -\> Create a new fork -\> ( Optional: Copy the [main]{.underline} branch only ) -\> Create fork*
    -   Now you have a copy of this repo on GitHub!
3.  You can go back to the previous slide & go through the steps 4 & 5
:::

## Exercise 1 - pull request

-   In your `workshopR` fork: find the file `.gitignore` and open it in RStudio.

::: callout-note
A **`.gitignore`** file tells **Git which files or folders it should ignore** (i.e., not track or commit). In other words: If something is listed in `.gitignore`, Git will pretend it doesn’t exist.
:::

-   Change the file such that you:

    1.  Suggest more data formats in the section `#Data`

    2.  Add a new section `#Docs` and suggest common document formats (e.g. .docx ...)

-   Save, stage, commit & push the changes to your fork

-   Create a pull request:

    -   Go to the URL of your fork, in the top bar find the button `pull requests`, and go on from there (make sure you choose the correct branches).

## Exercise 2 - merging

-   Part 1: merging without a conflict

    -   Go to your R project associated with `myfirstrepo`

    -   Create a new branch called `exercise2part1`

    -   Create a README.md file (if not already present), open it and add a line of text (a sentence is enough).

    -   Save changes, stage, commit & push

    -   Now, go back to the main branch & merge the two branches together

    -   Check whether it has worked (hint: you can look up the log tree)

    -   Commit & push

## Exercise 2 - merging

-   Part 2: solving a merge conflict

    -   Create a new branch called `exercise2part2`

    -   Add another sentence to your previously written one.

    -   Save changes, stage, commit & push

    -   Go back to the main branch & try to merge the branches.

    -   Check whether it has worked. If not: resolve the conflict in a way you want your final text to look like.

    -   Commit & push

## Exercise 3 - code development with version control

-   By now, you should have forked the repository `workshopRex`, now pull the current version of it

-   You will be able to find a pdf-file with some guidance on what you are expected to write your code for (the data will be provided via the internal cloud)

-   But before you jump in:

    -   Create a sub-directory `your-name-ex3` with a meaningful internal structure (e.g. subfolders for data, scripts, output ...)

    -   Think about how to set up the .gitignore file, so nothing is shared on github that is strictly internal

    -   Remember to work with branches & frequent commits

-   Go through the exercise in the pdf-file, push all your changes to the forked repository & create a pull request

## The end

![https://allisonhorst.com/git-github](images/clipboard-2250418702.png){fig-align="left" width="701"}
